
# client-config-examples/client_config_template.yaml
# Generic template for creating new client configurations
# Copy this file, rename it to <client_id>.yaml, and customize for each new client

# ============================================================================
# CLIENT PROFILE
# ============================================================================
# Basic information about the client and newsletter preferences

client_profile:
  # Human-readable name for the client
  name: "Client Name Here"
  
  # Machine-readable ID used in S3 prefixes (lowercase, no spaces, use underscores)
  # Example: "biotech_weekly", "pharma_monthly", "oncology_signals"
  client_id: "client_id_here"
  
  # Active status: true to enable automatic processing, false to disable
  active: false
  
  # Language code (e.g., "en", "fr", "de")
  language: "en"
  
  # Tone of the newsletter: "executive", "scientific", "technical", "general"
  tone: "executive"
  
  # Voice style: "concise", "analytical", "conversational", "formal"
  voice: "concise"
  
  # Frequency: "weekly", "bi-weekly", "monthly"
  frequency: "weekly"

# ============================================================================
# WATCH DOMAINS
# ============================================================================
# Define the domains of interest for this client.
# Each domain represents a logical grouping (technology, indication, regulatory area, etc.)
# and references canonical scopes + optional client-specific additions.

watch_domains:
  # Example 1: Technology-focused domain
  - id: "tech_example"
    type: "technology"
    
    # Reference to canonical technology scope (e.g., "LAI_keywords", "gene_therapy_keywords")
    technology_scope: "canonical_tech_scope_name"
    
    # Reference to canonical company scope (e.g., "LAI_companies", "gene_therapy_companies")
    company_scope: "canonical_company_scope_name"
    
    # Reference to canonical molecule scope (e.g., "LAI_molecules", "gene_therapy_molecules")
    molecule_scope: "canonical_molecule_scope_name"
    
    # Optional: Add client-specific companies not in canonical scopes
    add_companies:
      - "ClientSpecificCompany1"
      - "ClientSpecificCompany2"
    
    # Optional: Add client-specific molecules not in canonical scopes
    add_molecules:
      - "ClientSpecificMolecule1"
      - "ClientSpecificMolecule2"
    
    # Priority: "high", "medium", "low" (affects scoring)
    priority: "high"

  # Example 2: Indication-focused domain
  - id: "indication_example"
    type: "indication"
    
    # Reference to canonical indication scope (e.g., "addiction_keywords", "oncology_keywords")
    indication_scope: "canonical_indication_scope_name"
    
    # Reference to canonical company scope
    company_scope: "canonical_company_scope_name"
    
    # Reference to canonical molecule scope
    molecule_scope: "canonical_molecule_scope_name"
    
    # Optional: Add client-specific companies
    add_companies:
      - "IndicationSpecificCompany1"
    
    # Optional: Add client-specific molecules
    add_molecules:
      - "IndicationSpecificMolecule1"
    
    priority: "medium"

  # Example 3: Regulatory-focused domain
  - id: "regulatory_example"
    type: "regulatory"
    
    # Can combine technology and indication scopes for regulatory tracking
    technology_scope: "canonical_tech_scope_name"
    indication_scope: "canonical_indication_scope_name"
    
    priority: "high"

  # Add more domains as needed...

# ============================================================================
# NEWSLETTER LAYOUT
# ============================================================================
# Define the structure of the newsletter: sections, titles, max items per section

newsletter_layout:
  sections:
    # Section 1: Top signals (usually high-priority items from key domains)
    - id: "top_signals"
      title: "Top Signals"
      
      # List of watch domain IDs to pull items from
      source_domains:
        - "tech_example"
        - "regulatory_example"
      
      # Maximum number of items to include in this section
      max_items: 5
      
      # Optional: Filter by specific event types (from event_type_patterns.yaml)
      # If omitted, all event types are included
      # filter_event_types:
      #   - "clinical_update"
      #   - "regulatory"

    # Section 2: Indication-specific updates
    - id: "indication_updates"
      title: "Indication Updates"
      source_domains:
        - "indication_example"
      max_items: 5

    # Section 3: Partnerships and deals
    - id: "partnerships"
      title: "Partnerships & Deals"
      source_domains:
        - "tech_example"
        - "indication_example"
      max_items: 3
      filter_event_types:
        - "partnership"

    # Section 4: Scientific publications
    - id: "publications"
      title: "Key Publications"
      source_domains:
        - "tech_example"
        - "indication_example"
      max_items: 3
      filter_event_types:
        - "scientific_paper"

    # Add more sections as needed...

# ============================================================================
# NEWSLETTER DELIVERY
# ============================================================================
# Define how the newsletter should be formatted and delivered

newsletter_delivery:
  # Output format: "markdown" (MVP), "html" (future), "pdf" (future)
  format: "markdown"
  
  # Include a TL;DR summary at the top? (true/false)
  include_tldr: true
  
  # Include an intro paragraph? (true/false)
  include_intro: true
  
  # Delivery method: "s3" (MVP), "email" (future), "web_portal" (future)
  delivery_method: "s3"
  
  # Optional: Email address for notifications when newsletter is ready
  notification_email: "client@example.com"
  
  # Optional: Custom branding/footer text
  # footer_text: "Powered by Vectora Intelligence"

# ============================================================================
# NOTES FOR ADMINS
# ============================================================================
# 
# 1. Canonical scope names (technology_scope, company_scope, etc.) must match
#    the scope IDs defined in canonical/scopes/ files in S3.
#
# 2. Use add_companies and add_molecules sparingly. Prefer adding entities to
#    canonical scopes if they are relevant to multiple clients.
#
# 3. Domain priorities affect scoring: high-priority domains boost item scores.
#
# 4. Section order in newsletter_layout determines the order in the final newsletter.
#
# 5. filter_event_types is optional. If omitted, all event types are included.
#
# 6. After creating this config, upload it to:
#    s3://vectora-inbox-config/clients/<client_id>.yaml
#
# 7. Test the config by running the engine Lambda for this client:
#    aws lambda invoke --function-name vectora-inbox-engine \
#      --payload '{"client_id": "<client_id>", "date_range": "last_7_days"}' \
#      --profile rag-lai-prod --region eu-west-3 output.json
#
