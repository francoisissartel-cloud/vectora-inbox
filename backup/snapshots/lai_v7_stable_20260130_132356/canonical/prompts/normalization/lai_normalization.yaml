# Prompt de normalisation LAI pré-construit
# Utilise des références aux scopes canonical: {{ref:scope_name}}

metadata:
  vertical: "LAI"
  version: "1.1"
  created_date: "2025-12-23"
  updated_date: "2026-01-29"
  description: "Prompt normalisation pour Long-Acting Injectables - v1.1: Priorisation extraction dates"

system_instructions: |
  You are a specialized AI assistant for biotech/pharma news analysis.
  Focus on Long-Acting Injectable (LAI) technologies and related entities.
  Extract structured information with high precision.

user_template: |
  Analyze this biotech/pharma news item and extract structured information.

  CRITICAL: Only extract entities that are EXPLICITLY mentioned in the text.
  FORBIDDEN: Do not invent, infer, or hallucinate entities not present.

  TEXT TO ANALYZE:
  {{item_text}}

  LAI TECHNOLOGY FOCUS:
  Detect these Long-Acting Injectable technologies ONLY if explicitly mentioned:
  {{ref:lai_keywords.core_phrases}}

  High-precision technology terms:
  {{ref:lai_keywords.technology_terms_high_precision}}

  EXAMPLES OF ENTITIES TO DETECT:
  - Companies: {{ref:lai_companies_global}}
  - Molecules: {{ref:lai_molecules_global}}
  - Trademarks: {{ref:lai_trademarks_global}}

  EXCLUDE if these terms are present:
  {{ref:lai_keywords.negative_terms}}

  TASK:
  1. Generate a concise summary (2-3 sentences)
  2. CRITICAL: Extract publication date from content (format: YYYY-MM-DD) - REQUIRED FIELD
  3. Classify event type: clinical_update, partnership, regulatory, corporate_move, financial_results, other
  4. Extract ALL pharmaceutical/biotech company names mentioned
  5. Extract ALL drug/molecule names mentioned
  6. Extract ALL technology keywords mentioned
  7. Extract ALL trademark names mentioned
  8. Extract ALL therapeutic indications mentioned
  9. Evaluate LAI relevance (0-10 score)
  10. Detect anti-LAI signals
  11. Assess pure player context

  DATE EXTRACTION INSTRUCTIONS (CRITICAL - REQUIRED):
  - Look for dates like "27 January, 2026", "January 28, 2026", "09 January 2026", "December 9, 2025"
  - Return format: YYYY-MM-DD (REQUIRED)
  - If multiple dates, choose the publication date (not future event dates)
  - If no clear date found, return null
  - Confidence: 0.0-1.0 (1.0 = certain, 0.5 = uncertain, 0.0 = no date)
  - YOU MUST include both "extracted_date" and "date_confidence" in your response

  RESPONSE FORMAT (JSON only):
  {
    "summary": "...",
    "extracted_date": "2025-12-09",
    "date_confidence": 0.95,
    "event_type": "...",
    "companies_detected": ["..."],
    "molecules_detected": ["..."],
    "technologies_detected": ["..."],
    "trademarks_detected": ["..."],
    "indications_detected": ["..."],
    "lai_relevance_score": 0,
    "anti_lai_detected": false,
    "pure_player_context": false
  }

  CRITICAL: The fields "extracted_date" and "date_confidence" are REQUIRED in your JSON response.

  Respond with ONLY the JSON, no additional text.

bedrock_config:
  max_tokens: 1000
  temperature: 0.0
  anthropic_version: "bedrock-2023-05-31"
